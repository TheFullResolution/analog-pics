[debug] [2018-12-11T20:32:52.850Z] ----------------------------------------------------------------------
[debug] [2018-12-11T20:32:52.852Z] Command:       /usr/local/Cellar/node@8/8.14.0/bin/node /usr/local/bin/firebase deploy --only functions
[debug] [2018-12-11T20:32:52.852Z] CLI Version:   6.1.2
[debug] [2018-12-11T20:32:52.852Z] Platform:      darwin
[debug] [2018-12-11T20:32:52.852Z] Node Version:  v8.14.0
[debug] [2018-12-11T20:32:52.853Z] Time:          Tue Dec 11 2018 21:32:52 GMT+0100 (CET)
[debug] [2018-12-11T20:32:52.853Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-12-11T20:32:52.877Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-12-11T20:32:52.877Z] > authorizing via signed-in user
[debug] [2018-12-11T20:32:52.877Z] [iam] checking project analog-pics-a1a3b for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2018-12-11T20:32:52.879Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/analog-pics-a1a3b:testIamPermissions  

[debug] [2018-12-11T20:32:53.687Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'analog-pics-a1a3b'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-12-11T20:33:13.501Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "rm -rf lib && tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "1.7.0",
    "cors": "2.8.5",
    "firebase-admin": "6.3.0",
    "firebase-functions": "2.1.0",
    "fs-extra": "7.0.1",
    "lodash.merge": "4.6.1",
    "mime-types": "2.1.21",
    "sharp": "0.21.1"
  },
  "engines": {
    "node": "8"
  },
  "devDependencies": {
    "@types/fs-extra": "5.0.4",
    "@types/sharp": "0.21.0",
    "tslint": "5.11.0",
    "typescript": "3.1.3"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-12-11T20:33:13.502Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/analog-pics-a1a3b?view=CONSUMER_VIEW  
 
[debug] [2018-12-11T20:33:13.503Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/analog-pics-a1a3b?view=CONSUMER_VIEW  
 
[debug] [2018-12-11T20:33:14.796Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:14.904Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-12-11T20:33:14.905Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/analog-pics-a1a3b  
 
[debug] [2018-12-11T20:33:15.800Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:15.800Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/851287805520:getServerAppConfig  
 
[debug] [2018-12-11T20:33:16.054Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-12-11T20:33:16.059Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/analog-pics-a1a3b/configs  
 
[debug] [2018-12-11T20:33:16.325Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (60.02 KB) for uploading
[debug] [2018-12-11T20:33:20.167Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/analog-pics-a1a3b/locations/us-central1/functions:generateUploadUrl  
 
[debug] [2018-12-11T20:33:20.553Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:20.554Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-839c4aec-db68-4ba1-acad-e3de8072511c/16715752-197a-4c22-9587-70d6f9aa7891.zip?GoogleAccessId=service-851287805520@gcf-admin-robot.iam.gserviceaccount.com&Expires=1544562200&Signature=OFkjSre1x%2BZmtkR2%2FD6R%2BL4lxJMrwGuS0ciqrbTUVbdqBxbDGz1UKSyHbSKWl7s702b0dOCRi2HtCI3BcL4MfuGGOoPQpJmFSbR4tfzo2RaAlBJLhD2nlDieVJVy3u2uFy3pyWai66VLdr%2BVvVzreGEdeY%2BoPTe0kLazJVkgKHKAHWGIsThyMrPUFBRGOMM4bJvCtEBpCznJtUln8%2Bs51IPZom3sGg318BovKfnHFth7e8h7yjXi8V4zsDxFZ5ohFf7CnYXLgdTafuhNClLWMgdPbx6MmF3MUURXiDIen7GVhd57seB2STrZ8%2BO4CL9q%2FXSfr5%2BdfOlm2hundv89TQ%3D%3D  

[debug] [2018-12-11T20:33:21.114Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[debug] [2018-12-11T20:33:21.116Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/analog-pics-a1a3b/locations/-/functions  
 
[debug] [2018-12-11T20:33:21.942Z] <<< HTTP RESPONSE 200
[info] i  functions: updating Node.js 8 function onImageUpload(us-central1)...
[debug] [2018-12-11T20:33:21.945Z] Trigger is:  {"eventTrigger":{"resource":"projects/_/buckets/analog-pics-a1a3b.appspot.com","eventType":"google.storage.object.finalize","service":"storage.googleapis.com"}}
[info] i  functions: updating Node.js 8 function photos(us-central1)...
[debug] [2018-12-11T20:33:21.946Z] Trigger is:  {"httpsTrigger":{}}
[debug] [2018-12-11T20:33:21.948Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/analog-pics-a1a3b/locations/us-central1/functions/onImageUpload {"updateMask":"sourceUploadUrl,name,labels,runtime,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 

[debug] [2018-12-11T20:33:21.950Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/analog-pics-a1a3b/locations/us-central1/functions/photos {"updateMask":"sourceUploadUrl,name,labels,runtime,httpsTrigger"} 

[debug] [2018-12-11T20:33:22.499Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:22.589Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:22.591Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/analog-pics-a1a3b/locations/-/functions  
 
[debug] [2018-12-11T20:33:23.067Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:23.068Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:23.069Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:23.321Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:23.333Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:25.325Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:25.335Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:25.590Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:25.596Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:27.591Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:27.595Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:27.836Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:27.844Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:29.841Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:29.845Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:30.089Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:30.110Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:32.094Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:32.110Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:32.359Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:32.362Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:34.360Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:34.363Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:34.619Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:34.638Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:36.620Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:36.639Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:36.859Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:36.894Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:38.864Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:38.897Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:39.098Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:39.120Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:41.101Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:41.120Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:41.344Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:41.362Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:43.348Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:43.364Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:43.559Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:43.592Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:45.562Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:45.592Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:45.831Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:45.832Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:47.834Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:47.835Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:48.081Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:48.090Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:50.085Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:50.091Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:50.329Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:50.330Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:52.332Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:52.332Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:52.580Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:52.582Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:54.585Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvb25JbWFnZVVwbG9hZC9ZT2dfN2h5Q0JHYw  
 
[debug] [2018-12-11T20:33:54.585Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YW5hbG9nLXBpY3MtYTFhM2IvdXMtY2VudHJhbDEvcGhvdG9zL2pyS015aEVib05n  
 
[debug] [2018-12-11T20:33:54.820Z] <<< HTTP RESPONSE 200
[debug] [2018-12-11T20:33:54.829Z] <<< HTTP RESPONSE 200
